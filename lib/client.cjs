function e(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var t=/*#__PURE__*/e(require("url-join"));exports.Client=/*#__PURE__*/function(){function e(e,n){this.eventSource=void 0,this._callbacks=void 0,this.onOpenBound=void 0,this.onErrorBound=void 0,this.closeBound=void 0;var o=n?t.default(e,n):e;this.eventSource=new EventSource(o),this.onOpenBound=this.onOpen.bind(this),this.onErrorBound=this.onError.bind(this),this.closeBound=this.close.bind(this),this.eventSource.addEventListener("open",this.onOpenBound),this.eventSource.addEventListener("error",this.onErrorBound),this.eventSource.addEventListener("close",this.closeBound),this._callbacks={}}var n=e.prototype;return n.onOpen=function(e){},n.onError=function(e){},n.close=function(){this.eventSource&&(this.eventSource.removeEventListener("open",this.onOpenBound),this.eventSource.removeEventListener("error",this.onErrorBound),this.eventSource.removeEventListener("close",this.closeBound),this.removeAllEventListener(),this.eventSource.close(),this.eventSource=null)},n.addEventListener=function(e,t){var n,o=this,r=function(n){var o=JSON.parse(n.data);t({type:e,data:o})};return this.removeEventListener(e),this._callbacks[e]=r,null==(n=this.eventSource)||n.addEventListener(e,r),function(){return o.removeEventListener(e)}},n.removeEventListener=function(e){var t,n=this._callbacks[e];n&&(null==(t=this.eventSource)||t.removeEventListener(e,n),delete this._callbacks[e])},n.removeAllEventListener=function(){var e=this;Object.keys(this._callbacks).forEach(function(t){return e.removeEventListener(t)})},e}();
//# sourceMappingURL=client.cjs.map
