class e{constructor(e){this.path=void 0,this.eventSource=void 0,this._callbacks=void 0,this.path=e,this.eventSource=new EventSource(e),this.eventSource.addEventListener("open",this.onOpen.bind(this)),this.eventSource.addEventListener("error",this.onError.bind(this)),this.eventSource.addEventListener("close",this.close.bind(this)),this._callbacks={}}onOpen(e){}onError(e){}close(){var e;null==(e=this.eventSource)||e.close(),this.eventSource=null,this._callbacks={}}addEventListener(e,t){var s;const n=e=>{const s=e.type,n=JSON.parse(e.data);t({type:s,data:n})};this.removeEventListener(e),this._callbacks[e]=n,null==(s=this.eventSource)||s.addEventListener(e,n)}removeEventListener(e){const t=this._callbacks[e];var s;t&&(null==(s=this.eventSource)||s.removeEventListener(e,t),delete this._callbacks[e])}}export{e as Client};
//# sourceMappingURL=client.modern.js.map
